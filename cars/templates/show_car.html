{% extends "default.html" %}

{% load static %}

{% block 'body' %}

<div class="min-h-screen px-4 py-10 bg-center bg-no-repeat bg-cover"
     style="background-image: url('{% static "images/Background_app_psicologia.jpg" %}'); background-color: rgba(255, 255, 255, 0.5); background-size: 110% 110%; background-blend-mode: overlay;">

    <div class="mt-20 max-w-6xl mx-auto px-4 lg:px-8 py-8">
        <!-- Container lado a lado com centralização vertical e margem à esquerda -->
        <div class="ml-10 flex flex-col lg:flex-row items-center gap-30">
            
            <!-- Foto e nome -->
            <div class="flex flex-col items-center">
                <img class="size-40 rounded-full border-3 border-purple-500 shadow-lg" src="{{car_shown_main.car_photo.url}}" alt="">
                <p class="mt-3 text-3xl font-semibold tracking-tight text-purple-800 leading-relaxed text-center">
                    {{ car_shown_main.car_name }} {{ car_shown_description.car_tier }}
                </p>

                <a href="{% url 'car_view' car_shown_main.id %}" 
                class="mt-6 inline-flex justify-center rounded-md cursor-pointer bg-purple-900 px-5 py-4 text-sm font-semibold text-purple-100 shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-600 transition">
                    UPDATE CAR INFORMATION
                </a>

            </div>

            <!-- Vídeo -->
            <div class="w-full lg:w-2/3">
                <video class="w-full rounded-lg shadow-md" controls>
                    <source src="{{ consulta.video.url }}" type="video/mp4">
                </video>
            </div>
        </div>

        <!-- Tabela de tarefas -->
        <div class="mt-20 overflow-x-auto rounded-lg shadow bg-purple-50">
            <table class="min-w-full divide-y divide-purple-300">
                <thead class="bg-purple-200">
                    <tr class="divide-x divide-purple-200">
                        <th scope="col" class="py-3.5 pl-4 pr-4 text-left text-sm font-semibold text-purple-900">TAREFA</th>
                        <th scope="col" class="px-4 py-3.5 text-left text-sm font-semibold text-purple-900">DESCRIÇÃO</th>
                        <th scope="col" class="px-4 py-3.5 text-left text-sm font-semibold text-purple-900">FREQUÊNCIA</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-purple-200">
                    {% for tarefa in consulta.tarefas.all %}
                    <tr class="divide-x divide-purple-200">
                        <td class="whitespace-nowrap py-4 pl-4 pr-4 text-sm font-medium text-purple-900">{{ tarefa.tarefa }}</td>
                        <td class="whitespace-nowrap p-4 text-sm text-purple-500">{{ tarefa.instrucoes }}</td>
                        <td class="whitespace-nowrap p-4 text-sm text-purple-500">{{ tarefa.get_frequencia_display }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>

</div>

{% endblock 'body' %}

{% block 'footer' %}
<footer class="bg-purple-900 text-purple-50 text-center py-4">
  © 2025 Cars Database - All rights reserved.
</footer>
{% endblock 'footer' %}