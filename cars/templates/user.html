{% extends "default.html" %}

{% load static %}

{% block 'body' %}

    <div class="min-h-screen flex items-center justify-center px-4 py-10 bg-center bg-no-repeat bg-cover" style="background-image: url('{% static "images/Background_app_psicologia.jpg" %}'); background-color: rgba(255, 255, 255, 0.5); background-size: 110% 110%; background-blend-mode: overlay;">
    
        <div class="py-10 sm:py-10">
            <div class="mx-auto grid max-w-7xl gap-20 px-6 lg:px-8 xl:grid-cols-2">
            <div class="max-w-xl">
            
                <h2 class="text-pretty text-3xl font-semibold tracking-tight text-purple-900 sm:text-4xl">SIGN UP</h2>

                {% if messages %}
                    {% for message in messages %}

                        <div class="mt-5 rounded-md {{message.tags}}">

                            <div class="flex">
                                
                                <div class="ml-3 py-2">

                                    {{message}}

                                </div>
                            </div>
                        </div>

                    {% endfor %}
                {% endif %}

                {% if signup_form.errors %}
                <div class="text-red-600 mt-4">
                    <ul>
                    {% for field in signup_form %}
                    {% for error in field.errors %}
                        <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                    {% endfor %}
                    {% endfor %}
                    {% for error in signup_form.non_field_errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                    </ul>
                </div>
                {% endif %}

                
                <form class = "mt-10" action="{% url 'user_pre_register' %}" method="POST"> {% csrf_token %}
                    <label for="user_name" class="block mt-6 text-sm/6 font-medium text-purple-600">NAME</label>
                    <div class="mt-3">
                        <input type="text" name="user_name" id="user_name" placeholder="Enter your full name. No numbers or special characters." value="{{ form.user_name.value|default_if_none:'' }}" autocomplete="given-name" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 placeholder:italic focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    </div>

                    <label for="user_email" class="block mt-4 text-sm/6 font-medium text-purple-600">EMAIL</label>
                    <div class="mt-3">
                        <input type="text" name="user_email" id="user_email" placeholder="Enter a valid email (example@domain.com)" value="{{ form.user_email.value|default_if_none:'' }}" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 placeholder:italic focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    </div>

                    <label for="user_phone" class="block mt-4 text-sm/6 font-medium text-purple-600">PHONE</label>
                    <div class="mt-3">
                        <input type="text" name="user_phone" id="user_phone" maxlength="15" placeholder="Enter phone number (example: +55011XXXXXXXXX)" value="{{ form.user_phone.value|default_if_none:'' }}" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 placeholder:italic focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    </div>

                    <div>
                    <label class="block mt-4 text-sm/6 font-medium text-purple-600">Birthdate</label>

                    <div class="mt-2 flex gap-3">

                        <select name="user_age_month" class="w-1/3 rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6">
                            <option disabled selected>Month</option>

                            {% for user_age_month in user_months %}
                            <option value="{{user_age_month.0}}">{{user_age_month.1}}</option>
                            {% endfor %}  

                        </select>

                        <select name="user_age_day" class="w-1/3 rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6">

                            <option disabled selected>Day</option>
                            {% for user_age_day in user_days %}
                            <option value="{{user_age_day.0}}">{{user_age_day.1}}</option>
                            {% endfor %}

                        </select>

                        <select name="user_age_year" class="w-1/3 rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 focus:outline-2 focus:outline-indigo-600 sm:text-sm/6">

                            <option disabled selected>Year</option>
                            {% for user_age_year in user_years %}
                            <option value="{{user_age_year.0}}">{{user_age_year.1}}</option>
                            {% endfor %}

                        </select>
                    </div>
                    </div>

                    <div>
                        <label for="user_country" class="block mt-4 text-sm/6 font-medium text-purple-600">COUNTRY</label>
                        <div class="mt-3">
                            <select name="user_country" class="block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                
                                <option value="" disabled selected>Select your country of origin</option>

                                {% for user_country in user_countries %}
                                <option value="{{user_country.0}}">{{user_country.1}}</option>
                                {% endfor %}   
                                    
                            </select>
                                
                        </div>
                    </div>
                        
                    <button type="submit" name="pre_signup_submit" class="inline-flex justify-center rounded-md bg-purple-900 mt-7 cursor-pointer px-3 py-2 w-full text-sm font-semibold text-purple-100 shadow-sm hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600">SIGN UP</button>
                </form>
            </div>
                    
                <div class="w-full">

                    <h2 class="text-pretty text-3xl flex items-left justify-left font-semibold tracking-tight text-purple-900 sm:text-4xl">LOG IN</h2>

                    {% if messages %}
                        <div class="mt-3">
                            {% for message in messages %}
                                {% if message.tags == 'error' %}
                                    <p class="text-red-600 font-semibold">{{ message }}</p>
                                {% elif message.tags == 'success' %}
                                    <p class="text-green-600 font-semibold">{{ message }}</p>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% endif %}

                    <form class = "mt-6" action="{% url 'user_login' %}" method="POST"> {% csrf_token %}
                        <label for="user_nickname" class="block mt-10 text-sm/6 font-medium text-purple-600">USER NAME</label>
                        <div class="mt-3">
                            <input type="text" name="user_nickname" id="user_nickname" placeholder="Insert your username" autocomplete="given-name" class="block w-108 rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 placeholder:italic focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                        </div>

                        <label for="user_password" class="block mt-8 text-sm/6 font-medium text-purple-600">PASSWORD</label>
                        <div class="mt-3">
                            <input type="password" name="user_password" id="user_password" placeholder="Insert your password" class="block w-108 rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-purple-300 placeholder:text-purple-400 placeholder:italic focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                        </div>
                            
                        <button type="submit" name="signup_submit" class="block mx-auto mt-12 w-48 rounded-md bg-purple-900 mt-12 cursor-pointer px-3 py-2 w-48 text-sm font-semibold text-purple-100 shadow-sm hover:bg-purple-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-purple-600">LOG IN</button>
                    </form>

                </div>
            </div>
        </div>
      
    </div>

{% endblock 'body' %}

{% block 'footer' %}

<footer class="bg-purple-900 text-purple-50 text-center py-4">
  Â© 2025 Cars Database - All rights reserved.
</footer>

{% endblock 'footer' %}